---- Σχεδίαση Βάσης Δεδομένων τύπου Airbnb ----

Για το σκοπό αυτής της άσκησης καλούμαστε να υλοποίσουμε ένα σύστημα διαχείρισης κρατήσεων τύπου
Airbnb, το οποίο να έχει χαρακτηριστικά όπως χρήστες, σχέσεις μεταξύ χρηστών, μηνύματα, κρατήσεις, 
διαχείριση πληρωμών, παρουσίαση καταλυμμάτων, υπηρεσίες και άλλες λειτουργικότητες οι οποίες 
αποσκοπούν στην βελτίωση της εμπειρίας του χρήστη αυτής της πλατφόρμας. 

Οντότητες:

1) User 


Χαρακτηριστικά:
- UserID (πρωτεύον κλειδί), για την ταυτοποίηση του χρήστη
- Username, το όνομα του χρήστη
- User_type (για τον τύπο του χρήστη) 
- email
- phone_number, τηλέφωνο
- image , εικόνα προφίλ
- created_at, ημερομηνία δημιουργίας του προφίλ
- User_invited_by_id, id χρήστη που προσκάλεσε τον χρήστη στην πλατφόρμα

Συσχετίσεις:
- 1:n με User_invites_user και 1:1 με την ίδια οντότητα, με ξένα κλειδιά τα invited_user_id και old_user_id1, ένας 
χρήστης μπορεί να καλεί άλλους και να καλείται από κάποιον άλλο

- 1:1 με Local Professional, κάθε χρήστης μπορεί να είναι τοπικός επαγγελματίας

- 1:1 με Host, κάθε χρήστης μπορεί να είναι τοπικός επαγγελματίας

- 1:1 με Guest

- 1:n με User_sends_to_User και 1:n με User_sends_to_User. Το User_sends_to_User έχει δύο χαρακτηριστικά, user_id1 και user_id2, 
τα οποίο αντιστοιχίζονται ως ξένα κλειδιά με το UserID του User και αντιστοιχούν στον αποστολέα και τον παραλήπτης

- 1:n με Inspection, κάθε επιθεωρητής της πλατφόρμας ως χρήστης μπορεί να κάνει επιθεωρήσεις καταλυμμάτων

- Αυτοσυσχέτιση μεταξύ UserID και User_invited_by_id

2) Bookings 
Χαρακτηριστικά:

- check_in, ημερομηνία check_in
- check_out, ημερομηνία check_out
- status, κατάσταση κράτησης (pending, canceled, confirmed)
- time_booked(πρωτεύον κλειδί), ημερομηνία που έκλεισε η κράτηση
- free_cancellation_deadline, προθεσμία δωρεάν ακύρωσης
- Property_property_id(πρωτεύον κλειδί), το id της ιδιοκτησίας  που συνδέεται με την κράτηση
- Host_User_user_id, id οικοδεσπότη
- Guest_User_user_id, id επισκέπτη

Συσχετίσεις:

- Ν:1 με Property, μια ιδιοκτησία δέχεται πολλές κρατήσεις

- n:1 με Payments

- n:1 με Guest, πολλές κρατήσεις για κάθε επισκέπτη του καταλύμματος

- 1:1 με Damage Report, κάθε κράτηση έχει δυνητικά ζημιές


3) Payments

Χαρακτηριστικά: 

- PropertyID (πρωτεύον κλειδί), ιδιοκτησία για την οποία γίνεται ημερομηνία
πληρωμή

- userID (πρωτεύον κλειδί), ο χρήστης που πληρώνει
- amount, το ποσό
- method, μέθοδος πληρωμής
- balance_due, υπόλοιπο 
- date (πρωτεύον κλειδί), ημερομηνία πληρωμής 

Συσχετίσεις:
- n:1 με Bookings, πολλές πληρωμές για κάθε κράτηση (αν γίνονται σε δόσεις)

- n:1 με Guest, πολλές πληρωμές από κάθε επισκέπτη


4) Discounts 

Χαρακτηριστικά:

- User_user_id
- Property_property_id
- discount_reason, λόγος για τον οποίο δώθηκε έκπτωση
- discount_percentage, ποσοστό έκπτωσης
- start_date, αρχή προσφοράς
- end_date, τέλος προσφοράς
- discount_id (πρωτεύον κλειδί)

Συσχετίσεις:

- n:1 με Guest, ένας επισκέπτης μπορεί να δικαιούται πολλές προσφορές
- n:1 με Property , πολλές εκπτώσεις μπορούν να υπάρχουν για κάθε ιδιοκτησία

5) Property

Χαρακτηριστικά:

- property_id
- property_type
- name
- description
- location
- open_at_times
- rules_description , κείμενο με κανόνες που ισχύουν στο κατάλυμμα
- max_guests
- cost_per_night
- money_back_cancellation, χρήματα που επιστρέφονται μετά από ακύρωση
- owner_id, id ιδιοκτήτη

Συσχετίσεις:
- 1:n με Discounts, μια ιδιοκτησία πολλές εκπτώσεις
- 1:n με Guest reviews Host, η ιδιοκτησία μπορεί να δέχεται κριτικές
από πολλούς επισκέπτες
- 1:n με Wishlists, μια ιδιοκτησία μπορεί να ανήκει σε πολλά Wishlists
- 1:n με Maintenance History, η ιδιοκτησία μπορεί να δέχεται πολλές συντηρήσεις
- 1:n με Property Calendar, πολλές ημερομηνίες στις οποίες ελέγχεται η διαθεσιμότητα για
κάθε κατάλυμμα

- m:n με Representative μέσω του βοηθητικού table Property_has_Representative, μπορεί να υπάρχουν πολλοί 
εκρπόσωποι για κάθε ιδιοκτησία

- 1:n με Services, πολλές υπηρεσίες από κάθε ιδιοκτησία

- m:n με Local Professional μέσω του table Property_has_Local_Professional, πολλοί τοπικοί επαγγελματίες
μπορούν να εργάζονται για πολλές ιδιοκτησίες

- n:1 με Host, κάθε οικοδεσπότης μπορεί να έχει πολλές ιδιοκτησίες

- 1:n με Banned Guests, μπορεί να υπάρχουν πολλοί απαγορευμένοι επισκέπτες για κάθε ιδιοκτησία



6) Request Support 

Χαρακτηριστικά:
- support_request, κείμενο αιτήματος
- admin_help_request, κείμενο προς administrator της πλατφόρμας
- host_id
- date, ημερομηνία δημιουργίας παραπόνου
- User_user_id1, id χρήστη που έκανε το αίτημα

Συσχετίσεις:

- n:1 με Hosts, πολλά αιτήματα μπορούν να συνδέονται με έναν οικοδεσπότη

- n:1 με Guests, για τον ίδιο λόγο με την παραπάνω συσχέτιση

7) Services

Χαρακτηριστικά:
- User_id, id χρήστη που δέχεται τις υπηρεσίες
- property_id, id καταλύμματος
(και τα δύο ανήκουν στα πρωτεύοντα κλειδιά)

Συσχετίσεις:

- N:1 με Property, κάθε ιδιοκτησία προσφέρει πολλές υπηρεσίες
- N:1 με Local Professional, κάθε τοπικός επαγγελματίας μπορεί να 
προσφέρει πολλές υπηρεσίες σε μια ιδιοκτησία

8) Local Professional

Χαρακτηριστικά:

- profession, είδος επαγγελματία
- User_user_id(πρωτεύον κλειδί), id επαγγελματία ως χρήστη

Συσχετίσεις:
- 1:1 με User, κάθε τοπικός επαγγελματίας είναι και χρήστης της πλατφόρμας
- 1:n με Services
- m:n με property, μέσω του Property_has_Local_Professional

9) Wishlists

Χαρακτηριστικά:

- Guest_User_user_id (πρωτεύον κλειδί), id του χρήστη που φτιάχνει 
τη λίστα

- property_id (πρωτεύον κλειδί), id ιδιοκτησίας

Συσχετίσεις:

- n:1 με Property, μια ιδιοκτησία μπορεί να προστίθεται σε πολλά Wishlists
- n:1 με Guest, κάθε επισκέπτης μπορεί να καταχωρεί πολλά Wishlists

11) Property Calendar 

Χαρακτηριστικά:

- date (πρωτεύον κλειδί), ημερομηνίες 
- availability, διαθεσιμότητα (διαθέσιμο η κλεισμένο)
- Property_property_id

Συσχετίσεις:

- N:1 με property, πολλές ημερομηνίες για κάθε ιδιοκτησία στις οποίες ελέγχουμε τη διαθεσιμότητα
 

12) Maintenance History

Χαρακτηριστικά:

- date, ημερομηνία συντήρησης
- type_of_maintenance, περιγραφή συντήρησης
- Property_property_id, id ιδιοκτησίας

Συσχετίσεις:
- n:1 με Property, κάθε ιδιοκτησία με πολλές συντηρήσεις
- Ν:Μ με Local Professional, πολλοί τοπικοί επαγγελματίες μπορούν να κάνουν πολλές συντηρήσεις (βοηθητικό table εδώ είναι το Local Professional_has_Maintenance
History)

13) Guest

Χαρακτηριστικά:
- User_user_id (πρωτεύον κλειδί)
- guest_since, ημερομηνία πρώτης κράτησης επισκέπτης
- verification_status, boolean μεταβλητή για την επαλήθευση  προφίλ του επισκέπτη ή όχι
Συσχετίσεις:

- 1:1 με User, ένας επισκέπτης είναι και χρήστης
- 1:n με Request Support, κάθε επισκέπτης μπορεί να κάνει πολλά αιτήματα υποστήριξης
- 1:n με Discounts, κάθε επισκέπτης μπορεί να συνδέεται με πολλές εκπτώσεις
- 1:n με Payments, κάθε επισκέπτης μπορεί να εκτελεί πολλαπλές πληρωμές
- 1:n με Guest reviews Property, ένας επισκέπτης μπορεί να αφήνει κριτικές για πολλά καταλύμματα
- 1:n με Host reviews Guest, ένας επισκέπτης μπορεί να δέχεται πολλές κριτικές από οικοδεσπότες
- 1:n με Damage Report, ένας χρήστης μπορεί να συνδέεται δυνητικά με πολλές ζημιές (το αλλάζουμε σε 1:ν ή όχι??  γιατί είναι 1:1 τώρα)


14) Host

Χαρακτηριστικά:
- User_user_id (πρωτεύον)
- user_type (θα μπορούσε να φύγει)
- host_since, ημερομηνία που έγινε ο χρήστης αυτός οικοδεσπότης
- number_of_listings, αριθμός ιδιοκτησιών που ανήκουν στον οικοδεσπότη

Συσχετίσεις:
- 1:n με Property, ένας οικοδεσπότης μπορεί να έχει πολλές ιδιοκτησίες
- 1:n με Request Support, ένας οικοδεσπότης μπορεί να καλείται να δώσει υποστήριξη σε πολλά 
αιτήματα υποστήριξης

- 1:1 με User
- 1:n με Host reviews Guest, ένας οικοδεσπότης μπορεί να αφήνει κριτικές για πολλούς επισκέπτες
- n:m με Representative, μέσω του Representative_represents_host, πολλοί οικοδεσπότες μπορεί να εκπροσωπούνται
από πολλούς διαφορετικούς εκπροσώπους


15) Host verification

Χαρακτηριστικά:

- Title, τίλος που κέρδισε ο οικοδεσπότης
- DateAwarded, ημερομηνία που αποδόθηκε ο τίτλος
- HostID (πρωτεύον κλειδί), id οικοδεσπότη 

Συσχετίσεις:

- 1:1 με User, ένας χρήστης ως οικοδεσπότης έχει ένα id 
που σχετίζεται με τον τίτλο που κερδίζει

16) Banned Guests 

Χαρακτηριστικά:

- User_user_id, id απαγορευμένου χρήστη
- Property_property_id, id ιδιοκτησίας που συνδέεται 
- reason_for_ban , κείμενο που εξηγεί το λόγο της απαγόρευσης

Συσχετίσεις:

- n:1 με Property, κάθε ιδιοκτησία έχει πολλούς απαγορευμένους 
χρήστες (μήπως είναι n:M??)

- 1:1 με Guest

17) Representative

Χαρακτηριστικά:
- User_user_id, id χρήστη / εκπρόσωπου
- active_status, boolean με την οποία φαίνεται αν ο εκπρόσωπος
δουλεύει για κάποιο οικοδεσπότη ή όχι.
Συσχετίσεις:

- N:M με Host μέσω του table Representative_represents_host, γιατί
πολλοί οικοδεσπότες μπορούν να έχουν πολλούς εκπροσώπους 

- 1:1 με User , κάθε εκπρόσωπος είναι ένας χρήστης

- n:m με Property, μέσω του Property_has_Representative

18) Damage Report

Χαρακτηριστικά:

- GuestID (πρωτεύον κλειδί), φιλοξενούμενος
που προκάλεσε τη ζημιά στο κατάλυμμα
- Description, περιγραφή ζημιάς
- Damage_cost, κόστος
- time_booked (πρωτεύον κλειδί), χρόνος που έγινε η κράτηση
- Property_property_id, id ιδιοκτησία που υπέστη ζημιά 

Συσχετίσεις:

- 1:n με Guest, κάθε επισκέπτης έχει damage report, αν προκαλέσει ζημιά ως επισκέπτης
- 1:1 με Bookings, κάθε κράτηση δυνητικά έχει ένα damage report

19) Inspection

Χαρακτηριστικά:

- PropertyID (πρωτεύον κλειδί), id για την ιδιοκτησία που επιθεωρείται
- Date_of_inspection (πρωτεύον κλειδί), ημερομηνία επιθεώρησεις
- ConditionSummary, κείμενο περίληψης κατάστασης
- Property_property_id (πρωτεύον κλειδί), id ιδιοκτησίας που δέχεται την επιθεώρηση

Συσχετίσεις:

- n:1 με property, μια ιδιοκτησία δέχεται πολλές επιθεωρήσεις
- 1:n με User, πολλές επιθεωρήσεις για κάθε επιθεωρητή, ο οποίος είναι χρήστης


20) Property Images

- Χαρακτηριστικά

image (πρωτεύον κλειδί), κείμενο με το URL της εικόνας

- Συσχετίσεις
- n:1 με Property, μια ιδιοκτησία μπορεί να έχει πολλές εικόνες



21) User_invites_user

Πρόσκληση ενός χρήστη, που έχει επισκεφθεί μια ιδιοκτησία, προς έναν άλλο χρήστη

Χαρακτηριστικά:

- old_user_id1, id χρήστη που έχει επισκεφθεί προγενέστερα την ιδιοκτησία
- invited_user_id, id προσκεκλειμένου χρήστη
- discounts, περιγραφή εκπτώσεων λόγω πρόσκλησης

Συσχετίσεις:

- n:1 με User (ξένο κλειδί: old_user_id1) και n:1 με User (ξένο κλειδί: invited_user_id), ένας χρήστης
μπορεί να προσκαλεί στην πλατφόρμα αλλά και να προσκαλείται σε αυτή.



22) User_sends_to_User

Table για υποστήριξη ανταλλαγής μηνυμάτων μεταξύ των χρηστών

Χαρακτηριστικά:

- text, κείμενο μηνύματος 
- time_sent (πρωτεύον κλειδί), χρόνος αποστολής
- user_id1 (πρωτεύον κλειδί), αποστολέας
- user_id2 (πρωτεύον κλειδί), παραλήπτης

Συσχετίσεις:

- Αυτοαναφορική συσχέτιση με την οντότητα User, εφόσον καθένας μπορεί να στέλνει και να λαμβάνει μηνύματα
