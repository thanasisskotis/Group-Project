---- Σχεδίαση Βάσης Δεδομένων τύπου Airbnb ----

Για το σκοπό αυτής της άσκησης καλούμαστε να υλοποίσουμε ένα σύστημα διαχείρισης κρατήσεων τύπου
Airbnb, το οποίο να έχει χαρακτηριστικά όπως χρήστες, σχέσεις μεταξύ χρηστών, μηνύματα, κρατήσεις, 
διαχείριση πληρωμών, παρουσίαση καταλυμμάτων, υπηρεσίες και άλλες λειτουργικότητες οι οποίες 
αποσκοπούν στην βελτίωση της εμπειρίας του χρήστη αυτής της πλατφόρμας. 

Οντότητες:

1) User 


Χαρακτηριστικά:
- UserID (πρωτεύον κλειδί), για την ταυτοποίηση του χρήστη
- Username, το όνομα του χρήστη
- User_type (για τον τύπο του χρήστη) 
- email
- phone_number, τηλέφωνο
- image , εικόνα προφίλ
- created_at, ημερομηνία δημιουργίας του προφίλ

Συσχετίσεις:

- 1:n με User-Invites-User (ένας οικοδεσπότης καλεί ένα χρήστη)
- 1:n με Services ένας οικοδεσπότης μπορεί να προσφέρει πολλές υπηρεσίες
- 1:n με  Discounts, ένας οικοδεσπότης μπορεί να προσφέρει πολλές προσφορές
- 1:n με Payments, ένας χρήστης μπορεί να κάνει πολλές συναλλαγές
- 1:n με Property, ένας χρήστης μπορεί να έχει πολλές ιδιοκτησίες
- 1:n με User_associates_with_Property, ένας χρήστης μπορεί να έχει
πολλούς συνεργάτες που προοθούν την ιδιοκτησία
- 1:1 με Local Professional (τοπικό επαγγελματία)
- 1:n με Wishlists, ένας χρήστης μπορεί να έχει πολλά Wishlists
- Αυτοαναφορική συσχέτιση με Reviews, ένας χρήστης μπορεί να συνδέεται με πολλά review που είτε
τα δέχεται είτε τα διεξάγει για άλλο χρήστη.

- 1-1 με Host
- 1-n με Banned Guests, ένας χρήστης ως οικοδεσπότης συνδέεται
με πολλούς απαγορευμένους χρήστες

-n:m με Maintenance History που αποδίδεται ως 
  1:n με Maintenance_History_has_User 
  και n:1 με Maintenance History
  (μήπως είναι 1:N?, εννοώ όλη την Ν:Μ συσχέτιση αν μπορεί να αντικατασταθεί με  1:Ν με Maintenance History γενικά, όχι μόνο το δεύτερο μέρος όπως είπες χθες)

- 1:n με Inspection_has_User, ένας χρήστης ως εργαζόμενος
της πλατφόρμας μπορεί να κάνει πολλές επιθεωρήσεις καταλυμμάτων

- Αυτοαναφορική συσχέτιση με User_sends_to_User, ένας χρήστης
μπορεί να στέλνει και να λαμβάνει μηνύματα 

2) Bookings 
Χαρακτηριστικά:

- check_in, ημερομηνία check_in
- check_out, ημερομηνία check_out
- status, κατάσταση κράτησης (pending, canceled, confirmed)
- time_booked(πρωτεύον κλειδί), ημερομηνία που έκλεισε η κράτηση
- free_cancellation_deadline, προθεσμία δωρεάν ακύρωσης
- Property_property_id(πρωτεύον κλειδί), το id της ιδιοκτησίας  που συνδέεται με την κράτηση

Συσχετίσεις:

- N:M με Property που αποδίδεται ως:
    Ν:1 από Property_has_bookings
    και 1:N από Bookings σε Property_has_bookings (???, μήπως κι αυτή αντί για Ν:Μ είναι 1:Ν, πολλές κρατήσεις για κάθε ΜΙΑ ιδιοκτησία)

- N:M με Host που αποδίδεται ως:
    1:N με Host_has_Bookings
    και N:1 με Host

- 1:n με Property Calendar, μια ιδιοκτησία έχει πολλές ημερομηνίες
που είτε είναι διαθέσιμη για κράτηση είτε όχι


3) Payments

Χαρακτηριστικά: 

- PropertyID (πρωτεύον κλειδί), ιδιοκτησία για την οποία γίνεται ημερομηνία
πληρωμή

- userID (πρωτεύον κλειδί), ο χρήστης που πληρώνει
- amount, το ποσό
- method, μέθοδος πληρωμής
- balance_due, υπόλοιπο 
- date (πρωτεύον κλειδί), ημερομηνία πληρωμής 

Συσχετίσεις:
- n:1 με User, ένας χρήστης συνδέεται με πολλές πληρωμές

- n:1 με Property , πολλές πληρωμές συνδέονται με 1 ιδιοκτησία 


4) Discounts 

Χαρακτηριστικά:

- User_user_id
- Property_id
- discount_reason, λόγος για τον οποίο δώθηκε έκπτωση
- discount_percentage, ποσοστό έκπτωσης
- start_date, αρχή προσφοράς
- end_date, τέλος προσφοράς
- discount_id (πρωτεύον κλειδί)

Συσχετίσεις:

- n:1 με User, ένας χρήστης δικαιούται πολλές προσφορές
- n:1 με Property 

5) Property

Χαρακτηριστικά:

- property_id
- property_type
- name
- description
- location
- open_at_times
- rules_description , κείμενο με κανόνες που ισχύουν στο κατάλυμμα
- max_guests
- cost_per_night
- money_back_cancellation, χρήματα που επιστρέφονται μετά από ακύρωση
- owner_id, id ιδιοκτήτη

Συσχετίσεις:
- 1:n με Discounts, μια ιδιοκτησία πολλές εκπτώσεις 
- 1:n με Payments, n πληρωμές για κάθε ιδιοκτησία
- 1:n με Reviews 
- M:N με Bookings μέσω της Property_has_bookings ? (δεν είναι Ν:1??, πολλές κρατήσεις για κάθε ΜΙΑ ιδιοκτησία)
- 1:n με Reviews, κάθε ιδιοκτησία έχει πολλές κριτικές
- 1:n με Maintenance History, κάθε ιδιοκτησία έχει από ένα ιστορικό συντήρησης
- 1:n με Property Calendar
- 1:n με Damage Report, πολλές καταγραφές ζημιών για μια ιδιοκτησία
- 1:n με Services, πολλές υπηρεσίες από κάθε μια ιδιοκτησία
- M:N με User μέσω της User_associates_with_Property (πολλοί συνεργάτες για
πολλές ιδιοκτησίες)
- 1:n με Banned Guests, για κάθε ιδιοκτησία πολλοί απαγορευμένοι
επισκέπτες


6) Request Support 

Χαρακτηριστικά:
- support_request, κείμενο αιτήματος
- admin_help_request, κείμενο προς administrator της πλατφόρμας
- host_id
- date, ημερομηνία δημιουργίας παραπόνου
- User_user_id1, id χρήστη που έκανε το αίτημα

Συσχετίσεις:

- Αναδρομική συσχέτιση με User, ένας χρήστης μπορεί να κάνει
αιτήματα προς έναν χρήστη και να δέχεται αιτήματα από έναν άλλο
χρήστη

- (άλλη μια με Property, N:1?)

7) Services

Χαρακτηριστικά:
- User_id, id χρήστη που δέχεται τις υπηρεσίες
- property_id, id καταλύμματος που προσφέρει τις υπηρεσίες
(και τα δύο ανήκουν στα πρωτεύοντα κλειδιά)
Συσχετίσεις:

- N:1 με Property, κάθε ιδιοκτησία προσφέρει πολλές υπηρεσίες
- N:1 με User, κάθε χρήστης δέχεται πολλές υπηρεσίες

8) Local Professional

Χαρακτηριστικά:

- user_type, τύπος χρήστη
- profession, είδος επαγγελματία
- User_user_id(πρωτεύον κλειδί), id επαγγελματία ως χρήστη

Συσχετίσεις:
1:1 με User, κάθε τοπικός επαγγελματίας είναι και χρήστης της πλατφόρμας

9) Reviews

Χαρακτηριστικά:
ΠΡΟΒΛΗΜΑ ΣΤΟ ΠΡΩΤΕΥΟΝ ΚΛΕΙΔΙ!!!, δεν πρέπει να βάλουμε και την κράτηση (BookingID) στην οποία έγινε το review για να ξεχωρίζει με όλες τις άλλες
(βάζουμε 1-1 συσχέτιση με Booking?, μια αξιολόγηση για κάθε μια κράτηση?)

- reviewer_id (πρωτεύον κλειδί), id σχολιάζοντος χρήστη
- property_id , id ιδιοκτησίας της κράτησης η οποία αξιολογείται
- review_score
- reviewed_user_id, id σχολιαζόμενου οικοδεσπότη
- review_description

Συσχετίσεις:

- Αναδρομική συσχέτιση με Users, ένας χρήστης μπορεί να σχολιάσει
κάποιον άλλο χρήστη αλλά και να σχολιάζεται από άλλους

- 1:n με host verification

10) Wishlists

Χαρακτηριστικά:

- user_id (πρωτεύον κλειδί), id του χρήστη που φτιάχνει 
τη λίστα

- property_id (πρωτεύον κλειδί), id ιδιοκτησίας

Συσχετίσεις:

1:n με User, πολλά Wishlists για κάθε χρήστη

11) Property Calendar 

Χαρακτηριστικά:

- date (πρωτεύον κλειδί), ημερομηνίες 
- availability, διαθεσιμότητα (διαθέσιμο η κλεισμένο)
- Property_property_id

Συσχετίσεις:

- N:1 με property (δε θα έπρεπε να είναι 1:1??)

12) Maintenance History

Χαρακτηριστικά:

- date, ημερομηνία συντήρησης
- type_of_maintenance, περιγραφή συντήρησης
- Property_property_id, id ιδιοκτησίας

Συσχετίσεις:
- n:1 με Property, κάθε ιδιοκτησία με πολλές συντηρήσεις
- M:N με User, μέσω της Maintenance_History_has_User, πολλές συντηρήσεις μπορούν 
να έχουν πολλούς διαφορετικούς χρήστες που την κάνουν


13) Guest

Χαρακτηριστικά:
- User_user_id (πρωτεύον κλειδί)
- user_type (μπορεί και να φύγει??)
- guest_since, ημερομηνία πρώτης κράτησης επισκέπτης
- verification_status, boolean μεταβλητή για την επαλήθευση του επισκέπτη ή όχι
Συσχετίσεις:

- 1:1 με User, ένας επισκέπτης είναι και χρήστης
- N:M με Booking μέσω της Guest has Bookings (δε θα μπορούσε να γίνει 1:Ν συσχέτιση με Bookings κατευθείαν??)

14) Host
(άφησα 1:Ν συσχέτιση με Property, κάθε ένας Host έχει πολλές ιδιοκτησίες, όχι πολλοί Host πολλές ιδιοκτησίες)

Χαρακτηριστικά:
- User_user_id (πρωτεύον)
- user_type (θα μπορούσε να φύγει)
- host_since, ημερομηνία που έγινε ο χρήστης αυτός οικοδεσπότης
- number_of_listings, αριθμός ιδιοκτησιών που ανήκουν στον οικοδεσπότη

Συσχετίσεις:
- 1:1 με User, κάθε οικοδεσπότης είναι και χρήστης
- Ν:Μ με Representative μέσω του Representative_represents_host, 
πολλοί οικοδεσπότες μπορούν να έχουν πολλούς εκπροσώπους
- 1:n με Properties, ένας οικοδεσπότης μπορεί να έχει πολλές ιδιοκτησίες

15) Host verification

Χαρακτηριστικά:

- Title, τίλος που κέρδισε ο οικοδεσπότης
- DateAwarded, ημερομηνία που αποδόθηκε ο τίτλος
- HostID (πρωτεύον κλειδί), id οικοδεσπότη 
- BagdeID, id τίτλου

Συσχετίσεις:

- 1:1 με User, ένας χρήστης ως οικοδεσπότης έχει ένα id 
που σχετίζεται με τον τίτλο που κερδίζει

- 1:1 με Reviews (θα αλλάξει σε 1:n, το κερδίζει από πολλά reviews)
ΝΑ ΦΤΙΑΞΟΥΜΕ ΑΥΤΟΑΝΑΦΟΡΙΚΕΣ ΣΥΣΧΕΤΙΣΕΙΣ

16) Banned Guests 

Χαρακτηριστικά:

- User_user_id, id απαγορευμένου χρήστη
- Property_property_id, id ιδιοκτησίας που συνδέεται 
- reason_for_ban , κείμενο που εξηγεί το λόγο της απαγόρευσης

Συσχετίσεις:

- n:1 με Property, κάθε ιδιοκτησία έχει πολλούς απαγορευμένους 
χρήστες

- 1:1 με User, κάθε απαγορευμένος χρήστης είναι ένας χρήστης

17) Representative

Χαρακτηριστικά:
- user_type, τύπος χρήστη/ εκπρόσωπου
- User_user_id, id χρήστη / εκπρόσωπου
- active_status, boolean με την οποία φαίνεται αν ο εκπρόσωπος
δουλεύει για κάποιο οικοδεσπότη ή όχι.
Συσχετίσεις:

- N:M με Host μέσω του table Representative_represents_host, γιατί
πολλοί οικοδεσπότες μπορούν να έχουν πολλούς εκπροσώπους (1:N δεν πρέπει??)

- 1:1 με User , κάθε εκπρόσωπος είναι ένας χρήστης

18) Damage Report

Χαρακτηριστικά:

- GuestID (πρωτεύον κλειδί), φιλοξενούμενος
που προκάλεσε τη ζημιά στο κατάλυμμα
- Description, περιγραφή ζημιάς
- Damage_cost, κόστος
- time_booked (πρωτεύον κλειδί), χρόνος που έγινε η κράτηση
- Property_property_id, id ιδιοκτησία που υπέστη ζημιά 

Συσχετίσεις:

- 1:1 με User, κάθε χρήστης έχει damage report, αν προκαλέσει ζημιά (ίσως n:1 με User, αν προκαλέσει κάποιος πολλές ζημιές κάπου??)
- 1:1 με Property
- 1:1 με Bookings, κάθε κράτηση δυνητικά έχει ένα damage report

19) Inspection

Χαρακτηριστικά:

- PropertyID (πρωτεύον κλειδί), id για την ιδιοκτησία που επιθεωρείται
- Date_of_inspection (πρωτεύον κλειδί), ημερομηνία επιθεώρησεις
- ConditionSummary, κείμενο περίληψης κατάστασης
- Property_property_id (πρωτεύον κλειδί), id ιδιοκτησίας που δέχεται την επιθεώρηση

Συσχετίσεις:

- n:1 με property, μια ιδιοκτησία δέχεται πολλές επιθεωρήσεις
- n:m με User, πολλοί χρήστες ως επιθεωρητές μπορούν να κάνουν πολλές επιθεωρήσεις (μήπως είναι 1:n?, κάθε ΕΝΑΣ επιθεωρητής να κάνει πολλές επιθεωρήσεις?)


20) Property Images

- Χαρακτηριστικά

image (πρωτεύον κλειδί), κείμενο με το URL της εικόνας

- Συσχετίσεις
n:1 με Property, μια ιδιοκτησία μπορεί να έχει πολλές εικόνες


21) Property_has_bookings

Βοηθητικό table για n:m συσχέτιση μεταξύ Property-Bookings

Χαρακτηριστικά:

- Property_property_id (πρωτεύον κλειδί), id ιδιοκτησίας
- Booking_time_booked (πρωτεύον κλειδί), ημερομηνία κράτησης
- Bookings_property_id (πρωτεύον ?, πλεονάζον)

Συσχετίσεις:

- n:1 με Property, πολλές ιδιοκτησίες για κάθε στοιχείο του πίνακα
- 1:n με Bookings, πολλές κρατήσεις για κάθε στοιχείο του πίνακα

(Μπορεί να φύγει)

22) User_invites_user

Πρόσκληση ενός χρήστη, που έχει επισκεφθεί μια ιδιοκτησία, προς έναν άλλο χρήστη

Χαρακτηριστικά:

- old_user_id1, id χρήστη που έχει επισκεφθεί προγενέστερα την ιδιοκτησία
- invited_user_id, id προσκεκλειμένου χρήστη
- discounts, περιγραφή εκπτώσεων

Συσχετίσεις:

- n:1 με User, πολλές εκπτώσεις για ένα χρήστη
- 1-1 με User(??, )
με Property, Host?

23) User_associates_with_Property

Βοηθητικό table για N:M συσχέτιση User και Property
(μπορεί να φύγει λόγω προσθήκης Host και Associate)
Χαρακτηριστικά:

- User_user_id, id χρήστη που εργάζεται για μια ιδιοκτησία ως συνεργάτης
- Property_property_id, id ιδιοκτησίας
- property_relationsip, περιγραφή συνεργασίας με απαρίθμηση (ENUM: host, service) (συσχέτιση με Host, αν δε φύγει αυτό το table)

Συσχετίσεις:

- n:1 με Property, πολλά στοιχεία του table αυτού με μια ιδιοκτησία
- n:1 με User, πολλά στοιχεία του table με έναν χρήστη

25) Maintenance_History_has_User

Βοηθητικό table για n:m συσχέτιση Maintenance History με User
(δεν είναι 1:n ?? πολλές συντηρήσεις για κάθε χρήστη )
Χαρακτηριστικά:

- Maintenance History_date (πρωτεύον κλειδί), ημερομηνία συντήρησης
- Maintenance History_property_id (πρωτεύον κλειδί), id ιδιοκτησίας που υφόσταται τη συντήρηση
- User_user_id (πρωτεύον κλειδί), id χρήστη που κάνει τη συντήρηση

Συσχετίσεις:

- n:1 με User, πολλά στοιχεία του πίνακα με έναν χρήστη
- n:1 με Maintenance History, πολλά στοιχεία του πίνακα με n συντηρήσεις

26) Inspection_has_User

Βοηθητικό table για συσχέτιση n:m Inspection με User

Χαρακτηριστικά:

- Inspection_PropertyID (πρωτεύον κλειδί), id ιδιοκτησίας
- Inspection_Date_of_Inspection (πρωτεύον κλειδί), ημερομηνία επιθεώρησης
- InspectorId (πρωτεύον κλειδί), id επιθεωρητή

Συσχετίσεις:

- n:1 με User, πολλά στοιχεία του πίνακα για κάθε χρήστη
- n:1 με Inspection, πολλά στοιχεία του πίνακα με πολλές επιθεωρήσεις

27) User_sends_to_User

Table για υποστήριξη ανταλλαγής μηνυμάτων μεταξύ των χρηστών

Χαρακτηριστικά:

- text, κείμενο μηνύματος 
- time_sent (πρωτεύον κλειδί), χρόνος αποστολής
- user_id1 (πρωτεύον κλειδί), αποστολέας
- user_id2 (πρωτεύον κλειδί), παραλήπτης

Συσχετίσεις:

- Αυτοαναφορική συσχέτιση με την οντότητα User, εφόσον καθένας μπορεί να στέλνει και να λαμβάνει μηνύματα
