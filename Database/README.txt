---- Σχεδίαση Βάσης Δεδομένων τύπου Airbnb ----

Για το σκοπό αυτής της άσκησης καλούμαστε να υλοποίσουμε ένα σύστημα διαχείρισης κρατήσεων τύπου
Airbnb, το οποίο να έχει χαρακτηριστικά όπως χρήστες, σχέσεις μεταξύ χρηστών, μηνύματα, κρατήσεις, 
διαχείριση πληρωμών, παρουσίαση καταλυμμάτων, υπηρεσίες και άλλες λειτουργικότητες οι οποίες 
αποσκοπούν στην βελτίωση της εμπειρίας του χρήστη αυτής της πλατφόρμας. 

Μαζί με τις απαιτούμενες λειτουργικότητες του Α σκέλους υπάρχουν και λειτουργικότητες 
που εξυπηρετούν το Β σκέλος της άσκησης. Αυτές αποδίδονται με τις εξής οντότητες:

1) Inspection, επιθεώρηση καταλύμματος που διεξάγεται από έναν υπάλληλο της πλατφόρμας
2) Maintenance History, ιστορικό συντήρησης του καταλύμματος
3) Host Verification, επαλήθευση οικοδεσπότη
4) Damage Report, αναφορά και περιγραφή τυχόν ζημιάς που μπορεί να προκληθεί σε 
μία κράτηση

5) Banned Guests, απαγορευμένοι χρήστες από ιδιοκτησίες

----- Οντότητες και Συσχετίσεις ------


1) User 


Χαρακτηριστικά:
- UserID (πρωτεύον κλειδί), για την ταυτοποίηση του χρήστη
- Username, το όνομα του χρήστη
- User_type (για τον τύπο του χρήστη) 
- email
- phone_number, τηλέφωνο
- image , εικόνα προφίλ
- created_at, ημερομηνία δημιουργίας του προφίλ
- User_invited_by_id, id χρήστη που προσκάλεσε τον χρήστη στην πλατφόρμα

Συσχετίσεις:
- 1:n με User_invites_user και 1:1 με την ίδια οντότητα, με ξένα κλειδιά τα invited_user_id και old_user_id1, ένας 
χρήστης μπορεί να καλεί άλλους και να καλείται από κάποιον άλλο

- 1:1 με Local Professional, κάθε χρήστης μπορεί να είναι τοπικός επαγγελματίας

- 1:1 με Host, κάθε χρήστης μπορεί να είναι τοπικός επαγγελματίας

- 1:1 με Guest

- 1:n με User_sends_to_User και 1:n με User_sends_to_User. Το User_sends_to_User έχει δύο χαρακτηριστικά, user_id1 και user_id2, 
τα οποίο αντιστοιχίζονται ως ξένα κλειδιά με το UserID του User και αντιστοιχούν στον αποστολέα και τον παραλήπτης

- 1:n με Inspection, κάθε επιθεωρητής της πλατφόρμας ως χρήστης μπορεί να κάνει επιθεωρήσεις καταλυμμάτων

- Αυτοσυσχέτιση μεταξύ UserID και User_invited_by_id



2) Bookings 
Χαρακτηριστικά:

- check_in, ημερομηνία check_in
- check_out, ημερομηνία check_out
- status, κατάσταση κράτησης (pending, canceled, confirmed)
- time_booked(πρωτεύον κλειδί), ημερομηνία που έκλεισε η κράτηση
- free_cancellation_deadline, προθεσμία δωρεάν ακύρωσης
- Property_property_id(πρωτεύον κλειδί), το id της ιδιοκτησίας  που συνδέεται με την κράτηση
- Host_User_user_id, id οικοδεσπότη
- Guest_User_user_id, id επισκέπτη

Συσχετίσεις:

- Ν:1 με Property, μια ιδιοκτησία δέχεται πολλές κρατήσεις

- n:1 με Payments

- n:1 με Guest, πολλές κρατήσεις για κάθε επισκέπτη του καταλύμματος

- 1:1 με Damage Report, κάθε κράτηση έχει δυνητικά ζημιές


3) Payments

Χαρακτηριστικά: 

- PropertyID (πρωτεύον κλειδί), ιδιοκτησία για την οποία γίνεται ημερομηνία
πληρωμή

- userID (πρωτεύον κλειδί), ο χρήστης που πληρώνει
- amount, το ποσό
- method, μέθοδος πληρωμής
- balance_due, υπόλοιπο 
- date (πρωτεύον κλειδί), ημερομηνία πληρωμής 
- Guest_User_user_id, id επισκέπτη
- Booking_time_booked
- Bookings_Property_property_id

Συσχετίσεις:
- n:1 με Bookings, πολλές πληρωμές για κάθε κράτηση (αν γίνονται σε δόσεις)

- n:1 με Guest, πολλές πληρωμές από κάθε επισκέπτη


4) Discounts 

Χαρακτηριστικά:

- Guest_User_user_id
- Property_property_id
- discount_reason, λόγος για τον οποίο δώθηκε έκπτωση
- discount_percentage, ποσοστό έκπτωσης
- start_date, αρχή προσφοράς
- end_date, τέλος προσφοράς
- discount_id (πρωτεύον κλειδί)

Συσχετίσεις:

- n:1 με Guest, ένας επισκέπτης μπορεί να δικαιούται πολλές προσφορές
- n:1 με Property , πολλές εκπτώσεις μπορούν να υπάρχουν για κάθε ιδιοκτησία

5) Property

Χαρακτηριστικά:

- property_id
- property_type
- name
- description
- location
- opened_at
- rules_description , κείμενο με κανόνες που ισχύουν στο κατάλυμμα
- max_guests
- cost_per_night
- money_back_cancellation, χρήματα που επιστρέφονται μετά από ακύρωση
- Host_User_user_id, id ιδιοκτήτη

Συσχετίσεις:
- 1:n με Discounts, μια ιδιοκτησία πολλές εκπτώσεις
- 1:n με Guest reviews Host, η ιδιοκτησία μπορεί να δέχεται κριτικές
από πολλούς επισκέπτες
- 1:n με Wishlists, μια ιδιοκτησία μπορεί να ανήκει σε πολλά Wishlists
- 1:n με Maintenance History, η ιδιοκτησία μπορεί να δέχεται πολλές συντηρήσεις
- 1:n με Property Calendar, πολλές ημερομηνίες στις οποίες ελέγχεται η διαθεσιμότητα για
κάθε κατάλυμμα

- m:n με Representative μέσω του βοηθητικού table Property_has_Representative, μπορεί να υπάρχουν πολλοί 
εκρπόσωποι για κάθε ιδιοκτησία

- 1:n με Services, πολλές υπηρεσίες από κάθε ιδιοκτησία

- m:n με Local Professional μέσω του table Property_has_Local_Professional, πολλοί τοπικοί επαγγελματίες
μπορούν να εργάζονται για πολλές ιδιοκτησίες

- n:1 με Host, κάθε οικοδεσπότης μπορεί να έχει πολλές ιδιοκτησίες

- 1:n με Banned Guests, κάθε ιδιοκτησία έχει πολλούς απαγορευμένους χρήστες

- 1:n με Guest reviews Property, μια ιδιοκτησία συνδέεται με πολλές κριτικές επισκεπτών

- m:n με Representative, μέσω του table Property_has_Representative

- 1:n με Inspection, πολλές επιθεωρήσεις για κάθε κατάλυμμα

- 1:n με Bookings

- 1:n με Property Images, πολλές εικόνες μπορεί να υπάρχουν για κάθε ιδιοκτησία

- m:n με Local Professional μέσω του table Property_has_Local_Professional


6) Request Support 

Χαρακτηριστικά:
- support_request, κείμενο αιτήματος
- admin_help_request, κείμενο προς administrator της πλατφόρμας
- Host_User_user_id
- date, ημερομηνία δημιουργίας παραπόνου
- Guest_User_user_id, id χρήστη που έκανε το αίτημα

Συσχετίσεις:

- n:1 με Hosts, πολλά αιτήματα μπορούν να συνδέονται με έναν οικοδεσπότη

- n:1 με Guests, για τον ίδιο λόγο με την παραπάνω συσχέτιση

7) Services

Χαρακτηριστικά:
- Local Professional_User_user_id, id τοπικού επαγγελματία που δίνει τις υπηρεσίες
- Property_property_id, id καταλύμματος
(και τα δύο ανήκουν στα πρωτεύοντα κλειδιά)

Συσχετίσεις:

- N:1 με Property, κάθε ιδιοκτησία προσφέρει πολλές υπηρεσίες
- N:1 με Local Professional, κάθε τοπικός επαγγελματίας μπορεί να 
προσφέρει πολλές υπηρεσίες σε μια ιδιοκτησία

8) Local Professional

Χαρακτηριστικά:

- profession, είδος επαγγελματία
- User_user_id(πρωτεύον κλειδί), id επαγγελματία ως χρήστη

Συσχετίσεις:
- 1:1 με User, κάθε τοπικός επαγγελματίας είναι και χρήστης της πλατφόρμας
- 1:n με Services
- m:n με property, μέσω του Property_has_Local_Professional
- m:n με Maintenance History μέσω του Local Professional_has_Maintenance History

9) Wishlists

Χαρακτηριστικά:

- Guest_User_user_id (πρωτεύον κλειδί), id του χρήστη που φτιάχνει 
τη λίστα

- property_id (πρωτεύον κλειδί), id ιδιοκτησίας

Συσχετίσεις:

- n:1 με Property, μια ιδιοκτησία μπορεί να προστίθεται σε πολλά Wishlists
- n:1 με Guest, κάθε επισκέπτης μπορεί να καταχωρεί πολλά Wishlists

10) Property Calendar 

Χαρακτηριστικά:

- date (πρωτεύον κλειδί), ημερομηνίες 
- availability, διαθεσιμότητα (διαθέσιμο η κλεισμένο)
- Property_property_id

Συσχετίσεις:

- N:1 με property, πολλές ημερομηνίες για κάθε ιδιοκτησία στις οποίες ελέγχουμε τη διαθεσιμότητα
 

11) Maintenance History

Χαρακτηριστικά:

- date, ημερομηνία συντήρησης
- type_of_maintenance, περιγραφή συντήρησης
- Property_property_id, id ιδιοκτησίας

Συσχετίσεις:
- n:1 με Property, κάθε ιδιοκτησία με πολλές συντηρήσεις
- Ν:Μ με Local Professional, πολλοί τοπικοί επαγγελματίες μπορούν να κάνουν πολλές συντηρήσεις (βοηθητικό table εδώ είναι το Local Professional_has_Maintenance
History)

12) Guest

Χαρακτηριστικά:
- User_user_id (πρωτεύον κλειδί)
- guest_since, ημερομηνία πρώτης κράτησης επισκέπτης
- verification_status, boolean μεταβλητή για την επαλήθευση  προφίλ του επισκέπτη ή όχι
Συσχετίσεις:

- 1:1 με User, ένας επισκέπτης είναι και χρήστης
- 1:n με Request Support, κάθε επισκέπτης μπορεί να κάνει πολλά αιτήματα υποστήριξης
- 1:n με Discounts, κάθε επισκέπτης μπορεί να συνδέεται με πολλές εκπτώσεις
- 1:n με Payments, κάθε επισκέπτης μπορεί να εκτελεί πολλαπλές πληρωμές
- 1:n με Guest reviews Property, ένας επισκέπτης μπορεί να αφήνει κριτικές για πολλά καταλύμματα
- 1:n με Host reviews Guest, ένας επισκέπτης μπορεί να δέχεται πολλές κριτικές από οικοδεσπότες
- 1:n με Damage Report, ένας χρήστης μπορεί να συνδέεται δυνητικά με πολλές ζημιές 
- 1:n με Wishlists, πολλά Wishlists για κάθε χρήστη
- 1:n με Bookings, πολλές κρατήσεις για κάθε επισκέπτη
- 1:n με Banned Guests
- 1:n με Damage Report, πολλά reports δυνητικά για κάθε χρήστη



13) Host

Χαρακτηριστικά:
- User_user_id (πρωτεύον)
- user_type (θα μπορούσε να φύγει)
- host_since, ημερομηνία που έγινε ο χρήστης αυτός οικοδεσπότης
- number_of_listings, αριθμός ιδιοκτησιών που ανήκουν στον οικοδεσπότη

Συσχετίσεις:
- 1:n με Property, ένας οικοδεσπότης μπορεί να έχει πολλές ιδιοκτησίες
- 1:n με Request Support, ένας οικοδεσπότης μπορεί να καλείται να δώσει υποστήριξη σε πολλά 
αιτήματα υποστήριξης

- 1:1 με User
- 1:n με Host reviews Guest, ένας οικοδεσπότης μπορεί να αφήνει κριτικές για πολλούς επισκέπτες
- n:m με Representative, μέσω του Representative_represents_host, πολλοί οικοδεσπότες μπορεί να εκπροσωπούνται
από πολλούς διαφορετικούς εκπροσώπους


14) Host verification

Χαρακτηριστικά:

- Title, τίλος που κέρδισε ο οικοδεσπότης
- DateAwarded, ημερομηνία που αποδόθηκε ο τίτλος
- HostID (πρωτεύον κλειδί), id οικοδεσπότη 

Συσχετίσεις:

- 1:1 με User, ένας χρήστης ως οικοδεσπότης έχει ένα id 
που σχετίζεται με τον χρήστη στο User table

15) Banned Guests 

Χαρακτηριστικά:

- Guest_user_user_id, id απαγορευμένου χρήστη
- Property_property_id, id ιδιοκτησίας που συνδέεται 
- reason_for_ban , κείμενο που εξηγεί το λόγο της απαγόρευσης

Συσχετίσεις:

- n:1 με Property, κάθε ιδιοκτησία μπορεί να έχει πολλούς Banned Guests

- n:1 με Guest 

16) Representative

Χαρακτηριστικά:
- User_user_id, id χρήστη / εκπρόσωπου
- active_status, boolean με την οποία φαίνεται αν ο εκπρόσωπος
δουλεύει για κάποιο οικοδεσπότη ή όχι.
Συσχετίσεις:

- N:M με Host μέσω του table Representative_represents_host, γιατί
πολλοί οικοδεσπότες μπορούν να έχουν πολλούς εκπροσώπους 

- 1:1 με User , κάθε εκπρόσωπος είναι ένας χρήστης

- n:m με Property, μέσω του Property_has_Representative

17) Damage Report

Χαρακτηριστικά:

- Description, περιγραφή ζημιάς
- Damage_cost, κόστος
- time_booked (πρωτεύον ξένο κλειδί), χρόνος που έγινε η κράτηση
- Property_property_id (πρωτεύον ξένο κλειδί), id ιδιοκτησία που υπέστη ζημιά 
(τον guest που έκανε τη ζημιά μπορούμε να τον βρούμε μέσω του πίνακα Bookings)

Συσχετίσεις:

- 1:1 με Bookings, κάθε κράτηση δυνητικά έχει ένα damage report

18) Inspection

Χαρακτηριστικά:

- PropertyID (πρωτεύον κλειδί), id για την ιδιοκτησία που επιθεωρείται
- Date_of_inspection (πρωτεύον κλειδί), ημερομηνία επιθεώρησεις
- ConditionSummary, κείμενο περίληψης κατάστασης
- Property_property_id (πρωτεύον κλειδί), id ιδιοκτησίας που δέχεται την επιθεώρηση

Συσχετίσεις:

- n:1 με property, μια ιδιοκτησία δέχεται πολλές επιθεωρήσεις
- 1:n με User, πολλές επιθεωρήσεις για κάθε επιθεωρητή, ο οποίος είναι χρήστης


19) Property Images

- Χαρακτηριστικά

image (πρωτεύον κλειδί), κείμενο με το URL της εικόνας

- Συσχετίσεις
- n:1 με Property, μια ιδιοκτησία μπορεί να έχει πολλές εικόνες



20) User_invites_user

Πρόσκληση ενός χρήστη, που έχει επισκεφθεί μια ιδιοκτησία, προς έναν άλλο χρήστη

Χαρακτηριστικά:

- old_user_id1, id χρήστη που έχει επισκεφθεί προγενέστερα την ιδιοκτησία
- invited_user_id, id προσκεκλειμένου χρήστη
- discounts, περιγραφή εκπτώσεων λόγω πρόσκλησης

Συσχετίσεις:

- n:1 με User (ξένο κλειδί: old_user_id1) και n:1 με User (ξένο κλειδί: invited_user_id), ένας χρήστης
μπορεί να προσκαλεί στην πλατφόρμα αλλά και να προσκαλείται σε αυτή.



21) User_sends_to_User

Table για υποστήριξη ανταλλαγής μηνυμάτων μεταξύ των χρηστών

Χαρακτηριστικά:

- text, κείμενο μηνύματος 
- time_sent (πρωτεύον κλειδί), χρόνος αποστολής
- user_id1 (πρωτεύον κλειδί), αποστολέας
- user_id2 (πρωτεύον κλειδί), παραλήπτης

Συσχετίσεις:

- 1:n μεταξύ User και User_sends_to_User (ξένο κλειδί: user_id1 που δείχνει στο UserId του User) και n:1 μεταξύ
User_sends_to_User και User (ξένο κλειδί: user_id2 που δείχνει στο UserId του User).


22) Guest reviews Property 

Table για αξιολογήσεις καταλυμμάτων από επισκέπτες

Χαρακτηριστικά:

- review score, βαθμολογία 
- review description, περιγραφή αξιολόγησης
- Guest_User_user_id (πρωτεύον κλειδί), id επισκέπτη 
- Property_property_id (πρωτεύον κλειδί), id ιδιοκτησία που δέχεται την κριτική
- Date_of_Review (πρωτεύον κλειδί), ημερομηνία που καταχωρήθηκε η αξιολόγηση

Συσχετίσεις:

- n:1 με Guest, κάθε επισκέπτης μπορεί να κάνει πολλές αξιολογήσεις
- n:1 με Property, κάθε ιδιοκτησία μπορεί να έχει δεχτεί πολλές αξιολογήσεις


23) Host reviews Guest

Table για αξιολογήσεις επισκεπτών από οικοδεσπότες

Χαρακτηριστικά:

- review_score, βαθμολογία 
- review description, περιγραφή αξιολόγησης
- Guest_User_user_id (πρωτεύον κλειδί), id επισκέπτη 
- Host_User_user_id (πρωτεύον κλειδί), id οικοδεσπότη
- Date_of_Review (πρωτεύον κλειδί), ημερομηνία που καταχωρήθηκε η αξιολόγηση

Συσχετίσεις:

- n:1 με Guest, κάθε επισκέπτης μπορεί να κάνει πολλές αξιολογήσεις
- n:1 με Property, κάθε ιδιοκτησία μπορεί να έχει δεχτεί πολλές αξιολογήσεις


24) Property_has_Local_Professional

Βοηθητικό table για n:m συσχέτιση μεταξύ Property και Local Professional

Χαρακτηριστικά:

- Local Professional_User_user_id (πρωτεύον κλειδί), id τοπικού επαγγελματία που συνδέεται με την εκάστοτε ιδιοκτησία
- Property_property_id  (πρωτεύον κλειδί), id ιδιοκτησίας

Συσχετίσεις:
- N:1 με Property, πολλά στοιχεία αυτού του πίνακα συνδέονται με κάθε ιδιοκτησία
(κάποια ιδιοκτησία μπορεί να έχει πολλούς τοπικούς επαγγελματίες)

- Ν:1 με Local Professional, πολλά στοιχεία αυτού του πίνακα συνδέονται με κάθε τοπικό επαγγελματία
(κάποιος τοπικός επαγγελματίας μπορεί να συνδέεται με πολλές ιδιοκτησίες)




25) Property_has_Representative

Βοηθητικό table για n:m συσχέτιση μεταξύ Property και Representative

Χαρακτηριστικά:
- Representative_User_user_id (πρωτεύον κλειδί), id του εκπροσώπου
- Property_property_id (πρωτεύον κλειδί) , id ιδιοκτησίας

Συσχετίσεις:

- N:1 με Property, πολλά στοιχεία αυτού του πίνακα με κάθε ιδιοκτησία
(κάποιες ιδιοκτησίες μπορεί να έχει πολλούς εκπροσώπους)

- N:1 με Representative, πολλά στοιχεία αυτού του πίνακα με κάθε εκπρόσωπο
(πολλοί εκπρόσωποι μπορούν να εκπροσωπούν πολλές ιδιοκτησίες)

26) Local Professional_has_Maintenance History

Βοηθητικό table για n:m συσχέτιση μεταξύ Local Professional και Maintenance History

Χαρακτηριστικά:

- Local Professional_User_user_id (πρωτεύον κλειδί), id τοπικού επαγγελματία
- Maintenance History_date (πρωτεύον κλειδί), ημερομηνία που διεξήχθη η συντήρηση
- Maintenance History_Property_property_id (πρωτεύον κλειδί), id ιδιοκτησίας στην οποία έγινε συντήρηση

Συσχετίσεις:

- N:1 με Local Professional, πολλά στοιχεία αυτού του πίνακα με κάθε συντήρηση
(διάφοροι τοπικοί επαγγελματίες μπορούν να διεξάγουν πολλές συντηρήσεις)

- Ν:1 με Maintenance History, πολλά στοιχεία του πίνακα με πολλές συντηρήσεις


27) User has Relationship with user

Table για αρχικοποίηση πιθανών σχέσεων μεταξύ χρηστών
(φίλος, συνεργάτης, αφεντικό-υφιστάμενος εργαζόμενος)

Χαρακτηριστικά:
- user_id1 (πρωτεύον κλειδί), id πρώτου χρήστη
- user_id2 (πρωτεύον κλειδί), id δεύτερου χρήστη
- relationship_type

Συσχετίσεις:

- n:1 με User (ξένο κλειδί user_id1 με στήλη UserID του table User)
- n:1 με User (ξένο κλειδί user_id2 με στήλη UserID του table User)



28) Representative_represents_host

Βοηθητικό table για N:M συσχέτιση μεταξύ Representative και Host

Χαρακτηριστικά:

- Representative_User_user_id  (πρωτεύον κλειδί), id εκπροσώπου
- Host_User_user_id (πρωτεύον κλειδί), id οικοδεσπότη

Συσχετίσεις:

- n:1 με Representative, πολλοί εκπρόσωποι για κάθε οικοδεσπότη
- n:1 με Host, πολλοί οικοδεσπότες για κάθε εκπρόσωπο 
